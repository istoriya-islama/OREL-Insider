(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{435:(e,t,s)=>{Promise.resolve().then(s.bind(s,2301))},2301:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(5155),a=s(2115),l=s(8953),n=s(4488);function i(){var e;let[t,s]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[f,g]=(0,a.useState)(!1),[j,N]=(0,a.useState)("");(0,a.useEffect)(()=>{(async()=>{let{data:{user:e},error:t}=await l.N.auth.getUser();if(t||!e){window.location.href="/auth";return}let{data:r,error:a}=await l.N.from("profiles").select("id, username").eq("id",e.id).single();if(a||!r){window.location.href="/auth";return}s({id:r.id,name:r.username,email:e.email||""})})()},[]);let v=()=>o(!1),w=()=>c(!1),y=async e=>{if(e.preventDefault(),N(""),u.length<8)return void N("Пароль должен быть не менее 8 символов");if(u!==x)return void N("Пароли не совпадают");let{error:t}=await l.N.auth.updateUser({password:u});t?N("Ошибка обновления пароля: "+t.message):(N("Пароль успешно обновлён"),setTimeout(v,1500))},k=async e=>{e.preventDefault(),N("");let r=p.trim();if(r.length<1)return void N("Имя должно быть не менее 1 символа");if(!(null==t?void 0:t.id))return void N("Пользователь не найден");let{error:a}=await l.N.from("profiles").update({username:r}).eq("id",t.id);if(a)return void N("Ошибка обновления имени: "+a.message);s({...t,name:r}),N("Имя успешно обновлено"),setTimeout(w,1500)},C=async()=>{if(!(null==t?void 0:t.id))return void alert("Пользователь не найден");let{error:e}=await l.N.from("profiles").delete().eq("id",t.id);if(e)return void alert("Ошибка при удалении профиля: "+e.message);let{error:s}=await l.N.auth.signOut();if(s)return void alert("Ошибка при выходе: "+s.message);window.location.href="/pages/auth"};return t?(0,r.jsxs)("span",{children:[(0,r.jsx)(n.D,{}),(0,r.jsxs)("div",{className:"border border-blue-900/50 backdrop-blur-7xl p-10 m-10 rounded-2xl bg-gray-950/40 shadow-2xl shadow-blue-950",children:[(0,r.jsx)("h1",{className:"text-5xl mb-6 font-extrabold",children:"Ваш профиль:"}),(0,r.jsxs)("div",{className:"w-full mb-6 flex justify-between items-center",children:[(0,r.jsxs)("p",{children:["Имя: ",t.name]}),(0,r.jsx)("button",{onClick:()=>{N(""),b(""),c(!0)},className:"bg-blue-600 px-4 py-2 rounded hover:bg-blue-700 transition",children:"Сменить Имя"})]}),(0,r.jsxs)("p",{className:"mb-2",children:["Эл. почта: ",t.email]}),(0,r.jsxs)("div",{className:"w-full mb-6 flex justify-between items-center",children:[(0,r.jsxs)("p",{children:["Пароль: ","*".repeat((null==(e=t.password)?void 0:e.length)||8)]}),(0,r.jsx)("button",{onClick:()=>{N(""),m(""),h(""),o(!0)},className:"bg-blue-600 px-4 py-2 rounded hover:bg-blue-700 transition",children:"Сменить пароль"})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 mt-10",children:[(0,r.jsx)("button",{onClick:()=>{l.N.auth.signOut().then(()=>{window.location.href="/"})},className:"bg-red-600/50 px-4 py-2 rounded hover:bg-red-700/50 transition hover:scale-110",children:"Выйти"}),(0,r.jsx)("button",{onClick:C,className:"bg-red-600 px-4 py-2 rounded hover:bg-red-700 transition hover:scale-110",children:"Удалить аккаунт"})]}),i&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50 text-white",onClick:v,children:(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h2",{className:"text-xl mb-4",children:"Сменить пароль"}),(0,r.jsxs)("form",{onSubmit:y,className:"flex flex-col gap-4",children:[(0,r.jsx)("input",{type:f?"text":"password",placeholder:"Новый пароль",value:u,onChange:e=>m(e.target.value),className:"p-2 text-lg text-center border border-gray-800 rounded-2xl outline-none",required:!0}),(0,r.jsx)("input",{type:f?"text":"password",placeholder:"Подтвердите новый пароль",value:x,onChange:e=>h(e.target.value),className:"p-2 text-lg text-center border border-gray-800 rounded-2xl outline-none",required:!0}),(0,r.jsx)("button",{type:"button",onClick:()=>g(!f),className:"text-white text-sm underline",children:f?"Скрыть пароли":"Показать пароли"}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 py-2 rounded text-white font-semibold",children:"Обновить пароль"}),j&&(0,r.jsx)("p",{className:"mt-2 ".concat(j.includes("успешно")?"text-green-400":"text-red-500"),children:j})]}),(0,r.jsx)("button",{onClick:v,className:"mt-4 text-gray-400 hover:text-gray-200 text-sm",children:"Отмена"})]})}),d&&(0,r.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black/40 backdrop-blur-sm z-50 text-white",onClick:w,children:(0,r.jsxs)("div",{className:"bg-gray-900 rounded-lg p-6 w-full max-w-md",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("h2",{className:"text-xl mb-4",children:"Сменить Имя"}),(0,r.jsxs)("form",{onSubmit:k,className:"flex flex-col gap-4",children:[(0,r.jsx)("input",{type:"text",placeholder:"Новое Имя",value:p,onChange:e=>b(e.target.value),className:"p-2 text-lg text-center border border-gray-800 rounded-2xl outline-none",required:!0}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 py-2 rounded text-white font-semibold",children:"Обновить имя"}),j&&(0,r.jsx)("p",{className:"mt-2 ".concat(j.includes("успешно")?"text-green-400":"text-red-500"),children:j})]}),(0,r.jsx)("button",{onClick:w,className:"mt-4 text-gray-400 hover:text-gray-200 text-sm",children:"Отмена"})]})})]})]}):null}},4488:(e,t,s)=>{"use strict";s.d(t,{D:()=>n});var r=s(5155),a=s(8953),l=s(2115);function n(){let[e,t]=(0,l.useState)(null);return(0,l.useEffect)(()=>{!async function(){let{data:e,error:s}=await a.N.auth.getUser(),r=null==e?void 0:e.user;if(!r){window.location.href="/pages/auth";return}let l=r.id,{data:n,error:i}=await a.N.from("profiles").select("username").eq("id",l).single();if(i||!n)return console.error("Ошибка загрузки профиля:",i);t({name:n.username})}()},[]),(0,r.jsxs)("header",{className:"w-full p-6 bg-gray-950 flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl",children:"OREL Insider"}),(0,r.jsxs)("nav",{className:"flex gap-2 justify-end",children:[(0,r.jsx)("a",{href:"/pages/user",className:"px-2.5 py-2.5 transition-transform hover:scale-110",children:"Главная"}),(0,r.jsx)("a",{href:"/pages/user/betaAndroid",className:"px-2.5 py-2.5 transition-transform hover:scale-110",children:"Beta программ для Android"}),(0,r.jsx)("a",{href:"/pages/user/betaWindows",className:"px-2.5 py-2.5 transition-transform hover:scale-110",children:"Beta программ для Windows"}),(0,r.jsx)("a",{href:"https://t.me/obr_orel_bot",className:"px-2.5 py-2.5 transition-transform hover:scale-110",children:"Обратная связь с OREL"}),(0,r.jsx)("a",{href:"/pages/user/profile",className:"py-2.5 px-4.5 border rounded-3xl shadow-2xl shadow-blue-900 bg-gray-950 transition-transform hover:scale-120",children:(0,r.jsx)("p",{children:null==e?void 0:e.name[0]})})]})]})}},8953:(e,t,s)=>{"use strict";s.d(t,{N:()=>n});var r=s(5647);let a="https://tgaiyywjmwipqypiqfee.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnYWl5eXdqbXdpcHF5cGlxZmVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3MjA0MTUsImV4cCI6MjA2ODI5NjQxNX0.mXwGiP-bxO-f0a9hgtK-VRzerCMY1fr5jmgahn01le0";if(!a||!l)throw Error("Supabase URL and Key must be defined in environment variables.");let n=(0,r.UU)(a,l)}},e=>{var t=t=>e(e.s=t);e.O(0,[647,441,684,358],()=>t(435)),_N_E=e.O()}]);