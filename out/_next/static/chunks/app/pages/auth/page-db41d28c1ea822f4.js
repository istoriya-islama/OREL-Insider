(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236],{1262:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(5155),s=r(8953),n=r(4887),l=r.n(n),i=r(5695),o=r(2115);function d(){let e=(0,i.useRouter)(),[t,r]=(0,o.useState)(!1),[n,d]=(0,o.useState)({email:"",password:"",passwordConfirm:"",name:""}),[u,c]=(0,o.useState)(""),[m,x]=(0,o.useState)(!1),[p,h]=(0,o.useState)(""),b=e=>/\S+@\S+\.\S+/.test(e),g=e=>e.length>=8,f=e=>{d(t=>({...t,[e.target.name]:e.target.value}))},w=async t=>{t.preventDefault(),c(""),h(""),x(!0);let{email:r,password:a,passwordConfirm:i,name:o}=n;if(!r||!a||!i||!o){c("Все поля обязательны"),x(!1);return}if(!b(r)){c("Некорректный email"),x(!1);return}if(!g(a)){c("Пароль должен быть не менее 8 символов"),x(!1);return}if(a!==i){c("Пароли не совпадают"),x(!1);return}let{error:d}=await s.N.auth.signUp({email:r,password:a});if(d){c((await l()(d.message,{to:"ru"})).text),x(!1);return}let{data:u,error:m}=await s.N.auth.signInWithPassword({email:r,password:a});if(m){c((await l()(m.message,{to:"ru"})).text),x(!1);return}let p=u.user.id,{error:f}=await s.N.from("profiles").insert({id:p,username:o});if(f){c("Ошибка создания профиля: "+f.message),x(!1);return}if(!u.user.confirmed_at){h("Регистрация прошла! Подтвердите email."),x(!1);return}x(!1),e.push("/pages/user")};return(0,a.jsx)("div",{className:"w-full h-screen p-5 flex items-center justify-center bg-gradient-to-r from-blue-500 via-black to-blue-800 animate-gradient-x",children:(0,a.jsx)("main",{className:"w-4/6 border border-gray-800 rounded-lg shadow-lg shadow-blue-800 text-white p-10 m-20 backdrop-blur-lg bg-gray-900/50",children:(0,a.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:w,noValidate:!0,children:[(0,a.jsx)("h1",{className:"text-center text-2xl font-bold",children:"Регистрация"}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email ваш",className:"p-2 text-lg text-center shadow-xl shadow-blue-900/50 border border-gray-800 rounded-2xl outline-0",value:n.email,onChange:f,required:!0}),(0,a.jsx)("input",{type:t?"text":"password",name:"password",placeholder:"Пароль ваш",className:"p-2 text-lg text-center shadow-xl shadow-blue-900/50 border border-gray-800 rounded-2xl outline-0",value:n.password,onChange:f,required:!0}),(0,a.jsx)("input",{type:t?"text":"password",name:"passwordConfirm",placeholder:"Повторите пароль",className:"p-2 text-lg text-center shadow-xl shadow-blue-900/50 border border-gray-800 rounded-2xl outline-0",value:n.passwordConfirm,onChange:f,required:!0}),(0,a.jsx)("input",{type:"text",name:"name",placeholder:"Имя ваше",className:"p-2 text-lg text-center shadow-xl shadow-blue-900/50 border border-gray-800 rounded-2xl outline-0",value:n.name,onChange:f,required:!0}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"flex items-center justify-center cursor-pointer border border-blue-800 w-3/6 rounded-3xl p-2 bg-gray-950 mx-50 disabled:opacity-50",children:m?"Регистрация...":"Отправить"}),(0,a.jsx)("button",{type:"button",onClick:()=>r(!t),className:"text-white cursor-pointer transition-transform duration-300 hover:rotate-x-32 hover:scale-125 hover:translate-z-20 transform-gpu",children:t?"Скрыть пароли":"Показать пароли"}),u&&(0,a.jsx)("p",{className:"text-red-500 text-center mt-2",children:u}),p&&(0,a.jsx)("p",{className:"text-green-400 text-center mt-2",children:p}),(0,a.jsxs)("p",{className:"text-center",children:["Уже есть аккаунт? ",(0,a.jsx)("a",{href:"auth/login",children:"Войти"})]})]})})})}},6034:(e,t,r)=>{Promise.resolve().then(r.bind(r,1262))},8953:(e,t,r)=>{"use strict";r.d(t,{N:()=>l});var a=r(5647);let s="https://tgaiyywjmwipqypiqfee.supabase.co",n="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnYWl5eXdqbXdpcHF5cGlxZmVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3MjA0MTUsImV4cCI6MjA2ODI5NjQxNX0.mXwGiP-bxO-f0a9hgtK-VRzerCMY1fr5jmgahn01le0";if(!s||!n)throw Error("Supabase URL and Key must be defined in environment variables.");let l=(0,a.UU)(s,n)}},e=>{var t=t=>e(e.s=t);e.O(0,[647,61,441,684,358],()=>t(6034)),_N_E=e.O()}]);