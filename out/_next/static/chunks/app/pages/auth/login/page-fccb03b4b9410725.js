(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[526],{2107:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(5155),s=t(2115),l=t(5695),n=t(8953),i=t(4887),o=t.n(i);function u(){let[e,r]=(0,s.useState)(!1),[t,i]=(0,s.useState)({name:"",email:"",password:""}),[u,d]=(0,s.useState)(""),[m,c]=(0,s.useState)(!1),h=(0,l.useRouter)(),p=e=>{i({...t,[e.target.name]:e.target.value})},x=async e=>{e.preventDefault(),d(""),c(!0);try{let{data:e,error:r}=await n.N.auth.signInWithPassword({email:t.email.trim(),password:t.password});if(r){let e=await o()(r.message,{to:"ru"});d(e.text),c(!1);return}if(!e.user){d("Не удалось войти: пользователь не найден"),c(!1);return}if(!e.user.email_confirmed_at){d("Пожалуйста, подтвердите email через ссылку в письме"),c(!1);return}let{data:s,error:l}=await n.N.from("profiles").select("username").eq("id",e.user.id).single();if(l){d("Не удалось загрузить профиль"),c(!1);return}if(localStorage.setItem("user",JSON.stringify({id:e.user.id,email:e.user.email,username:(null==s?void 0:s.username)||""})),t.name!==s.username)return(0,a.jsx)("p",{children:"Вы не зарегистрировались"});h.push("/pages/user")}catch(e){d("Произошла ошибка при входе"),c(!1)}};return(0,a.jsx)("div",{className:"w-full h-screen p-5 flex items-center justify-center bg-gradient-to-r from-blue-500 via-black to-blue-800 animate-gradient-x",children:(0,a.jsx)("main",{className:"w-4/6 border border-gray-800 rounded-lg shadow-lg shadow-blue-800 text-white p-10 m-20 backdrop-blur-lg bg-gray-900/50",children:(0,a.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:x,children:[(0,a.jsx)("h1",{className:"text-center text-2xl font-bold",children:"Вход"}),(0,a.jsx)("input",{type:"email",name:"email",placeholder:"Email ваш",className:"p-2 text-lg text-center shadow-xl shadow-blue-900/50 border border-gray-800 rounded-2xl outline-0",value:t.email,onChange:p,required:!0}),(0,a.jsx)("input",{type:e?"text":"password",name:"password",placeholder:"Пароль ваш",className:"p-2 text-lg text-center shadow-xl shadow-blue-900/50 border border-gray-800 rounded-2xl outline-0",value:t.password,onChange:p,required:!0}),(0,a.jsx)("input",{type:"text",name:"name",placeholder:"Ваше Имя",className:"p-2 text-lg text-center shadow-xl shadow-blue-900/50 border border-gray-800 rounded-2xl outline-0",value:t.name,onChange:p,required:!0}),(0,a.jsx)("button",{type:"submit",disabled:m,className:"flex items-center justify-center cursor-pointer border border-blue-800 w-3/6 rounded-3xl p-2 bg-gray-950 mx-50",children:m?"Входим...":"Войти"}),(0,a.jsx)("button",{type:"button",onClick:()=>r(!e),className:"text-white cursor-pointer transition-transform duration-300 hover:rotate-x-32 hover:scale-125 hover:translate-z-20 transform-gpu",children:e?"Скрыть пароль":"Показать пароль"}),u&&(0,a.jsx)("p",{className:"text-red-500 text-center mt-2",children:u}),(0,a.jsxs)("p",{children:["Нет аккаунта? ",(0,a.jsx)("a",{href:"../auth",children:"Зарегистрироваться"})]})]})})})}},3203:(e,r,t)=>{Promise.resolve().then(t.bind(t,2107))},8953:(e,r,t)=>{"use strict";t.d(r,{N:()=>n});var a=t(5647);let s="https://tgaiyywjmwipqypiqfee.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRnYWl5eXdqbXdpcHF5cGlxZmVlIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI3MjA0MTUsImV4cCI6MjA2ODI5NjQxNX0.mXwGiP-bxO-f0a9hgtK-VRzerCMY1fr5jmgahn01le0";if(!s||!l)throw Error("Supabase URL and Key must be defined in environment variables.");let n=(0,a.UU)(s,l)}},e=>{var r=r=>e(e.s=r);e.O(0,[647,61,441,684,358],()=>r(3203)),_N_E=e.O()}]);